<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
      crossorigin="anonymous"
    />
    <title>TinyApp</title>

    <style>
      main {
        max-width: 900px;
        margin: 1em auto;
      }
      .url-list {
        list-style: none;
        padding: 0;
        margin: 0;
        border-top: 1px solid #ddd;
      }
      .url-header,
      .url-item {
        display: flex;
        justify-content: space-between;
        padding: 0.5em 1em;
        border-bottom: 1px solid #ddd;
      }
      .url-header {
        font-weight: bold;
        background-color: #f8f9fa; /* light grey bg */
      }
      .url-text {
        flex-grow: 1;
        margin-right: 1em;
        word-break: break-word;
      }
      .url-actions {
        display: flex;
        gap: 0.5em;
      }
      form {
        margin: 0;
      }
    </style>
  </head>
  <body>
    <%- include("partials/_header", { user: user }) %>
    <main>
      <h3>My URLs</h3>

      <ul class="url-list">
        <li class="url-header">
          <div style="flex: 1;">Short URL ID</div>
          <div style="flex: 3;">Long URL</div>
          <div style="width: 120px;">Actions</div>
        </li>

        <% for (let id in urls) { %>
          <li class="url-item">
            <div style="flex: 1;">
              <a href="/u/<%= id %>" target="_blank"><%= id %></a>
            </div>
            <div class="url-text" style="flex: 3;"><%= urls[id] %></div>
            <div class="url-actions" style="width: 120px;">
              <form method="GET" action="/urls/<%= id %>">
                <button type="submit" class="btn btn-outline-primary btn-sm">
                  Edit
                </button>
              </form>
              <form method="POST" action="/urls/<%= id %>/delete">
                <button type="submit" class="btn btn-outline-danger btn-sm">
                  Delete
                </button>
              </form>
            </div>
          </li>
        <% } %>
      </ul>
    </main>

    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
